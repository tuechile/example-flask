{% extends "layout.html" %}

{% block title %}| T4SG × 2ft Prosthetics{% endblock %}

{% block extra_css %}
<link href="/static/css/ux.css" rel="stylesheet">
{% endblock %}

{% block content %}

<!-- Sticky progress bar -->
<div class="progress-wrap">
    <div class="progress-bar" id="progressBar"></div>
</div>

<!-- ===================== HERO ===================== -->
<div class="bio-container reveal">
    <div class="case-hero">
        <p class="case-subtitle" style="margin:0;font-size: var(--fs-1);">T4SG × 2ft Prosthetics</p>
        <h1 class="case-title">When Inventory Fails, People Wait</h1>
        <p class="case-subtitle" style="font-size: var(--fs-1);">
            A UX case study on designing an <strong>offline-first</strong> system for global prosthetics care.
        </p>

        <div class="tag-row">
            <div class="tag">Role: UX Design</div>
            <div class="tag">My scope: Add / Edit / View Component </div>
            <div class="tag">Research: President + Treasurer + 3 Volunteers</div>
            <div class="tag">Constraint: Build from Scratch + Unreliable internet</div>
        </div>
    </div>
</div>

<!-- ===================== PREVIEW IMAGE (provided) ===================== -->
<div class="bio-container reveal">
    <div class="media-card">
        <!-- Provided by you -->
        <img src="/static/asset/images/ux/t4sg/preview.png" alt="2ft inventory system preview">
    </div>
</div>

<!-- ===================== TL;DR ===================== -->
<div class="bio-container reveal">
    <div class="callout">
        <h3 style="font-family: 'BHN Cinema';">TL;DR</h3>
        <p>• One prosthetic fitting requires ~9+ components. One missing part = the patient goes home without a leg.</p>
        <p>• 2ft’s inventory lived across spreadsheets/Notion/manual cross-checks — fragile under turnover and low
            Wi-Fi.</p>
        <p>• We designed an offline-first system with clear logistics vs technical separation and low cognitive load.
        </p>
    </div>
</div>
<div class="t4sg-page">
    <!-- ===================== CONTEXT ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Context</h2>
            <p><strong>A Prosthetic Is Never Just One Thing</strong></p>
            <p>
                A prosthetic leg isn’t a single object — it’s a system. On average, nine separate components must come
                together
                for one fitting. If even one part is missing, delayed, or mislabeled, a patient goes home without a leg.
            </p>
            <p>
                2ft Prosthetics works across 10 countries, redistributing donated prosthetic components from U.S.
                manufacturers
                and clinics to underserved amputees worldwide. The work is powered largely by volunteers — students,
                clinicians,
                and prosthetists — operating across time zones, languages, and unreliable internet access.
            </p>
            <p>
                As the organization scaled, one quiet truth emerged:
                <br><em>The hardest part wasn’t getting donations. It was keeping track of them.</em>
            </p>
        </div>
    </div>
    <div class="media-card">
        <!-- Provided by you -->
        <img src="/static/asset/images/ux/t4sg/redes.png" alt="2ft inventory system preview">
    </div>

    <!-- ===================== CURRENT PROBLEM ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>The Current Problem</h2>
            <p><strong>Good Intentions, Fragile Systems</strong></p>
            <p>
                Inventory at 2ft Prosthetics lived in spreadsheets, Notion pages, and manual cross-checks. On paper,
                everything existed.
                In reality, volunteers struggled to answer basic questions:
            </p>
            <p>
                — What do we actually have right now?<br>
                — Where is this component stored?<br>
                — Has it shipped? Has it been fitted?<br>
                — Who donated this — and how do we report impact back?
            </p>
        </div>
    </div>

    <div class="bio-container reveal">
        <div class="masonry">
            <div class="item">
                <img class="lightboxable" src="/static/asset/images/ux/t4sg/spreadsheets.png"
                    alt="Placeholder: Spreadsheet General inventory view">
            </div>
            <div class="item">
                <img class="lightboxable" src="/static/asset/images/ux/t4sg/sheet2.png" alt="Placeholder: Keep track">
            </div>
            <div class="item">
                <img class="lightboxable" src="/static/asset/images/ux/t4sg/sheet3.png"
                    alt="Placeholder: Summary of Requested Components">
            </div>
        </div>
    </div>
    <p class="img-caption">
        Placeholder content in Real Template 2feet Prosthetics is currently using
    </p>

    <!-- ===================== RESEARCH ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Research</h2>
            <p><strong>Listening Closely to the People Holding It Together</strong></p>
            <p>
                We conducted interviews with the 2ft Prosthetics <strong>President</strong>, <strong>Treasurer</strong>,
                and
                <strong>three volunteers</strong> who manage inventory updates in real conditions.
                Instead of hypotheticals, we focused on real workflows:
            </p>
            <p>
                — Screen-shared walkthroughs of current spreadsheets<br>
                — How updates happen under time pressure<br>
                — Where mistakes, duplication, or confusion creep in<br>
                — What happens when Wi-Fi disappears
            </p>
            <p>
                We also ran a competitive analysis across existing inventory tools (Airtable, Sortly, Notion, Odoo,
                etc.).
            </p>
        </div>
    </div>

    <!-- ===================== INTERVIEW NOTES (INTERACTIVE) ===================== -->
    <!-- ===================== INTERVIEW NOTES (INTERACTIVE) ===================== -->
    <div class="bio-container reveal">
        <div class="insights-card">

            <div class="insights-head">
                <div>
                    <h3 class="insights-title">Interview Highlights</h3>
                </div>

                <button class="mini-btn" type="button" id="openAffinity">
                    View raw
                </button>
            </div>

            <!-- Persona tabs -->
            <div class="tabs" role="tablist" aria-label="Interview personas">
                <button class="tab active" type="button" data-persona="all" role="tab">All</button>
                <button class="tab" type="button" data-persona="president" role="tab">President</button>
                <button class="tab" type="button" data-persona="treasurer" role="tab">Treasurer</button>
                <button class="tab" type="button" data-persona="volunteer" role="tab">Volunteers</button>
            </div>

            <!-- Theme chips -->
            <div class="chips" aria-label="Theme filters">
                <button class="chip active" type="button" data-theme="all">All themes</button>
                <button class="chip" type="button" data-theme="offline">Offline reality</button>
                <button class="chip" type="button" data-theme="onboarding">Onboarding + language</button>
                <button class="chip" type="button" data-theme="inventory">Inventory clarity</button>
                <button class="chip" type="button" data-theme="reporting">Reporting</button>
            </div>

            <!-- Cards grid -->
            <div class="insights-grid" id="insightsGrid">

                <!-- PRESIDENT — SYSTEM FRAGMENTATION -->
                <article class="insight" data-persona="president" data-theme="inventory">
                    <div class="meta">
                        <span class="pill">President</span>
                        <span class="tag-mini">Inventory</span>
                    </div>
                    <h4>“The same part exists in three different places.”</h4>
                    <p>
                        Inventory lives across multiple spreadsheets, tabs, and naming conventions, making it hard to
                        know
                        whether a component is available, used, or misplaced.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> one canonical inventory source with consistent component
                            IDs and
                            clear status states (in storage, on trip, fitted, returned).</p>
                    </div>
                </article>

                <!-- PRESIDENT — CONFUSING STATUS LABELS -->
                <article class="insight" data-persona="president" data-theme="onboarding">
                    <div class="meta">
                        <span class="pill">President</span>
                        <span class="tag-mini">Labeling</span>
                    </div>
                    <h4>“You have to already know the system to use it.”</h4>
                    <p>
                        Status labels and categories are inconsistent, undocumented, and difficult for new volunteers to
                        understand without direct guidance.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> standardized terminology, inline definitions, and
                            guardrails that
                            prevent mislabeling during data entry.</p>
                    </div>
                </article>

                <!-- PRESIDENT — NO REAL-TIME SNAPSHOT -->
                <article class="insight" data-persona="president" data-theme="visibility">
                    <div class="meta">
                        <span class="pill">President</span>
                        <span class="tag-mini">Operations</span>
                    </div>
                    <h4>“I just want to know what we have right now.”</h4>
                    <p>
                        There is no reliable real-time snapshot of inventory — checking availability means digging
                        through
                        spreadsheets and asking people directly.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> a default dashboard showing current inventory counts
                            with
                            last-updated timestamps and editor attribution.</p>
                    </div>
                </article>

                <!-- VOLUNTEER — OFFLINE WORK -->
                <article class="insight" data-persona="volunteer" data-theme="offline">
                    <div class="meta">
                        <span class="pill">Volunteer</span>
                        <span class="tag-mini">Offline</span>
                    </div>
                    <h4>“I usually write it down and update it later.”</h4>
                    <p>
                        Clinics, travel days, and storage sites often lack reliable internet, forcing volunteers to
                        track parts
                        on paper or in personal notes.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> offline-first data entry with visible sync states and
                            safe conflict
                            resolution when reconnecting.</p>
                    </div>
                </article>

                <!-- VOLUNTEER — FEAR OF EDITING -->
                <article class="insight" data-persona="volunteer" data-theme="onboarding">
                    <div class="meta">
                        <span class="pill">Volunteer</span>
                        <span class="tag-mini">Edit anxiety</span>
                    </div>
                    <h4>“I’m worried I’ll mess something up.”</h4>
                    <p>
                        Volunteers hesitate to update records because it’s unclear who edited what last, or whether
                        changes can
                        be undone.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> edit history, change previews, and clear save
                            confirmation to
                            support confident collaboration.</p>
                    </div>
                </article>

                <!-- VOLUNTEER — NAVIGATION PAIN -->
                <article class="insight" data-persona="volunteer" data-theme="usability">
                    <div class="meta">
                        <span class="pill">Volunteer</span>
                        <span class="tag-mini">Navigation</span>
                    </div>
                    <h4>“I never know where to look.”</h4>
                    <p>
                        Information is spread across tabs and columns with no clear hierarchy, making even simple
                        lookups slow.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> task-oriented navigation (search, add, move, review)
                            instead of
                            spreadsheet-style layouts.</p>
                    </div>
                </article>

                <!-- TREASURER — REPORTING BURDEN -->
                <article class="insight" data-persona="treasurer" data-theme="reporting">
                    <div class="meta">
                        <span class="pill">Treasurer</span>
                        <span class="tag-mini">Reporting</span>
                    </div>
                    <h4>“We rebuild reports every year.”</h4>
                    <p>
                        Donor and inventory reports are assembled manually because fields aren’t consistent or
                        comparable across
                        years.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> normalized donor fields, timestamps, and export-ready
                            reports for
                            year-over-year comparison.</p>
                    </div>
                </article>

                <!-- TREASURER — FINANCIAL VISIBILITY -->
                <article class="insight" data-persona="treasurer" data-theme="accountability">
                    <div class="meta">
                        <span class="pill">Treasurer</span>
                        <span class="tag-mini">Accountability</span>
                    </div>
                    <h4>“I don’t directly manage inventory — but I’m responsible for it.”</h4>
                    <p>
                        Components represent real financial value, yet inventory tracking doesn’t clearly support
                        auditing or
                        accountability.
                    </p>
                    <button class="expand" type="button">Why this mattered</button>
                    <div class="more">
                        <p><strong>Design implication:</strong> traceability from donor → component → usage to support
                            financial
                            oversight without extra manual work.</p>
                    </div>
                </article>

            </div>

            <!-- Quick “so what” strip -->
            <div class="so-what">
                <div class="so-what-item">
                    <div class="kicker">The real bottleneck</div>
                    <div class="big">Updating is harder than tracking</div>
                </div>
                <div class="so-what-item">
                    <div class="kicker">The default environment</div>
                    <div class="big">Internet is unreliable (or absent)</div>
                </div>
                <div class="so-what-item">
                    <div class="kicker">The trust requirement</div>
                    <div class="big">“Who changed this?” must be obvious</div>
                </div>
            </div>
        </div>
    </div>



    <div class="bio-container reveal">
        <div class="callout">
            <h3>What we learned quickly</h3>
            <p>Most existing tools failed in the same ways: assumed stable internet, visual density overload, unclear
                separation between logistics and technical data, and a steep learning curve for new volunteers.</p>
        </div>
    </div>

    <!-- ===================== SYNTHESIS ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Design Goals</h2>
            <p><strong>What We Optimized For (and What We Didn’t)</strong></p>
            <p>
                — Clarity over completeness<br>
                — Fast entry over perfect data<br>
                — Offline-first by default<br>
                — Low cognitive load for new volunteers<br>
                — Traceability without visual overload
            </p>


        </div>
    </div>

    <!-- ===================== IDEATION (EFFORT × IMPACT) ===================== -->

    <div class="bio-container reveal">
        <div class="split">
            <div class="media-card" style="width: 400px;">
                <img class="lightboxable" src="/static/asset/images/ux/t4sg/affmap.png" alt="Impact vs effort matrix">
            </div>
            <div class="bio-container reveal">
                <div class="bio-text" style="text-align:left; max-width:920px;">
                    <h2>Ideation</h2>
                    <p><strong>Feature decisions by Impact × Effort</strong></p>
                    <p>
                        We prioritized what would reduce uncertainty the fastest. Using an impact × effort map, we
                        shipped
                        “low-hanging fruit” first,
                        then layered in more powerful features once the core flows worked.
                    </p>
                    <p>
                        This kept the product usable for new volunteers while still leaving space for advanced
                        functionality as 2ft
                        scales.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <p class="img-caption">
        “We started with clarity + offline reliability, then added power features later.”
    </p>

    <div class="bio-container reveal">
        <div class="callout">
            <h3>Feature rollout (how it evolved)</h3>
            <p><strong>Phase 1:</strong> Core Inventory Reliability (simple viewing, terminology, edit component).</p>
            <p><strong>Phase 2:</strong> Deeper Traceability (edit history, comments, richer categorization).</p>
            <p><strong>Phase 3:</strong> Scalability Features (add component flow, filters, helpers).</p>
        </div>
    </div>


    <!-- ===================== MY SCOPE: VIEW / EDIT / ADD FLOW ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>My Contribution</h2>
            <p><strong>View / Edit / Add Component Flow</strong></p>
            <p>
                I owned the end-to-end flow for how a volunteer <strong>views</strong> a component, makes a safe
                <strong>edit</strong>,
                and <strong>adds</strong> a new component without breaking traceability.
            </p>
            <p>
                Design decisions I focused on:
                <br>— Keep primary actions always accessible (view history / edit / add)
                <br>— Prevent accidental edits (inline popups, clear save states)
                <br>— Standardize technical inputs (dropdowns + placeholders, not free text)
                <br>— Make accountability visible (edit history + who/when)
            </p>
        </div>
    </div>

    <div class="bio-container reveal">
        <div class="split">
            <div class="media-card" style="width: 600px;">
                <img class="lightboxable" src="/static/asset/images/ux/t4sg/userflow.png"
                    alt="User flow: View Component">
            </div>
            <div class="bio-text" style="text-align:left;">
                <h2>Flow Breakdown</h2>
                <p><strong>View Component</strong></p>
                <p>
                    The component page is structured so volunteers understand the “state” first (logistics),
                    then drill into technical details only when needed. Collapsible sections reduce overload.
                </p>
                <p><strong>Clear Flow Needed:</strong> 4 distinct areas of information are central to a cognitive flow:
                    sticky
                    profile, logistics→technical→manufacturer.</p>

            </div>
        </div>
    </div>


    <!-- ===================== LO-FI ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Lo-Fi Prototyping</h2>
            <p><strong>Stripping It Down Until It Made Sense</strong></p>
            <div class="media-card" style="width: 800px;">

                <img class="lightboxable" src="/static/asset/images/ux/t4sg/lofi up.png"
                    alt="Placeholder: Lo-fi Ideation">
            </div>
            <p>
                The black & white prototypes focused purely on information hierarchy, navigation clarity,
                and reducing visual density. If a field didn’t earn its place, it was removed.
            </p>
        </div>
    </div>
    <div class="t4sg-mockups">
        <img class="lightboxable" src="/static/asset/images/ux/t4sg/lofi view.png"
            alt="Placeholder: Lo-fi view component screen (B&W)">
        <img class="lightboxable" src="/static/asset/images/ux/t4sg/lofi add.png"
            alt="Placeholder: Lo-fi add component flow (B&W)">
    </div>
    <!-- ===================== ITERATION BRIDGE ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>What we learned, what we changed, and why it worked</h2>
            <p>
                Lo-fi helped us prove the hierarchy. But once stakeholders interacted with it, the feedback wasn’t about
                visual design —
                it was about <strong>speed, trust, and reducing “I might break something” anxiety</strong>.
            </p>
        </div>
    </div>

    <div class="bio-container reveal">
        <div class="split">
            <div class="callout" style="flex:1;">
                <h3>What wasn’t working </h3>
                <p>• There is a hierarchy of information that wasn’t clearly represented</p>
                <p>• Too many fields visible at once</p>
                <p>• Edits felt risky (no clear confirmation )</p>
                <p>• Logistics + technical details blended together</p>
                <p>• Patient-centered categorization makes components' relationship complex</p>
            </div>

            <div class="callout" style="flex:1;">
                <h3>What changed (Hi-Fi)</h3>
                <p>• Collapsible sections → reveal complexity only when needed</p>
                <p>• Clear save states → safer changes</p>
                <p>• Stronger separation: Logistics → Technical → Manufacturer</p>
                <p>• Dropdowns + defaults + helper text → less typing, fewer errors</p>
                <p>• Flow of work in Add Components established more properly</p>
            </div>
        </div>
    </div>

    <p class="img-caption">
        <strong>Designer note:</strong> The goal wasn’t to add UI polish but to make the same work feel
        <em>lighter</em> and more reliable.
    </p>

    <!-- ===================== HI-FI ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Hi-Fi Design</h2>
            <p><strong>Making Complexity Feel Calm</strong></p>
            <p>
                The blue/yellow design introduced structure without noise:
                clear separation between <strong>logistics → technical → manufacturer details</strong>,
                collapsible sections, inline edit popups, and visible history for trust.
            </p>
        </div>
    </div>

    <div class="t4sg-mockups">
        <img class="lightboxable" src="/static/asset/images/ux/t4sg/hifi view.png"
            alt="Placeholder: Hi-fi view component (blue/yellow)">
        <img class="lightboxable" src="/static/asset/images/ux/t4sg/hifi edit.png"
            alt="Placeholder: Hi-fi edit component inline popup (blue/yellow)">
        <img class="lightboxable" src="/static/asset/images/ux/t4sg/hifi add.png"
            alt="Placeholder: Hi-fi history/comments (blue/yellow)">
    </div>
    <p class="img-caption">
        (1) View component, (2) Edit Component, (3)
        Add Component
    </p>

    <!-- ===================== TESTING & FEEDBACK ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Testing & Feedback</h2>
            <p><strong>Where the Design Got Smarter (Fast)</strong></p>
            <p> More speed with less typing: ideas like autofill, stock image autofill
                (when no photo exists), and even <strong>adding fields</strong> on the fly came up as ways to reduce
                friction.</p>
            <p>

            <p><strong>What stakeholders pushed us toward</strong></p>
            <p>
                A reality check on implementation: we flagged open questions about the backend —
                like whether field management needs its own admin page, and what “autofill” would actually pull from
                (model number? manufacturer database? past entries?).
            </p>
            <p>
                Type-first workflow was a win: starting from component types (since each type has its own
                properties) felt far more natural than exposing every possible spreadsheet field and forcing volunteers
                to guess.
            </p>
            </p>

            <p>
                The biggest validation came from a single sentence:
                <br><em>“I don’t feel like I’m going to break anything.”</em>
            </p>
        </div>
    </div>

    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Try It Yourself</h2>
            <p><strong>Explore the prototype the way a volunteer would</strong></p>
            <p>
                This interactive prototype reflects the hi-fi design shown above.
                It’s best experienced by clicking through the component workflow,
                starting from type selection and moving into detailed edits.
            </p>

            <div class="video"><video src="/static/asset/images/ux/t4sg/preview.mp4" autoplay muted loop  playsinline></video>

            </div>

            <a href="https://www.figma.com/proto/dWSwmnPwX50N8TKSQIPS5S/Lo-fi---%3E-Hi-fi--Copy-?t=UO7WjHeEBFCJ3JlO-1"
                target="_blank" class="cta-button"><strong>
                Open Interactive Prototype → </strong>
            </a>

            <p style="margin-top:12px; font-size:0.9rem; opacity:0.8;">
                Tip: Try editing a component to see how fields, history, and permissions are surfaced.
            </p>
                        <p>
                Permissions matter: stakeholders emphasized that changing fields can cause organization-wide
                mixups, so we needed clearer role-based privileges (e.g., who can edit fields vs. who can only edit
                values).
            </p>

        </div>
    </div>


    <!-- ===================== REFLECTION ===================== -->
    <div class="bio-container reveal">
        <div class="bio-text" style="text-align:left; max-width:920px;">
            <h2>Reflection</h2>
            <p><strong>What This Project Taught Me</strong></p>
            <p>
                This is my first exposure to UX Design, so there were many new frameworks and mindsets to internalize.
                Designing for social impact isn’t about adding features.
                It’s about removing uncertainty as much as possible and box everything together.
            </p>
            <p>
                As this is a work from scratch, we did experiment a lot with different flows and structures in an
                entirely
                new field of expertise.
                The biggest challenge was balancing complexity (lots of fields, edge cases, offline states) with
                usability (clear flows, low cognitive load, fast entry).
            </p>
        </div>
    </div>


    <!-- Lightbox overlay (your body.css already styles .lightbox-overlay / .close-btn) -->
    <div class="lightbox-overlay" id="lightbox">
        <div class="close-btn" id="lightboxClose">&times;</div>
        <img id="lightboxImg" src="" alt="Expanded image">
    </div>
</div>
<script>
    // ===== Scroll progress bar =====
    (function () {
        const bar = document.getElementById("progressBar");
        function onScroll() {
            const doc = document.documentElement;
            const scrollTop = doc.scrollTop || document.body.scrollTop;
            const scrollHeight = doc.scrollHeight - doc.clientHeight;
            const pct = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
            bar.style.width = pct.toFixed(2) + "%";
        }
        window.addEventListener("scroll", onScroll, { passive: true });
        onScroll();
    })();

    // ===== Reveal on scroll =====
    (function () {
        const els = document.querySelectorAll(".reveal");
        const obs = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) e.target.classList.add("show");
            });
        }, { threshold: 0.12 });
        els.forEach(el => obs.observe(el));
    })();

    // ===== Accordion =====
    (function () {
        const btn = document.querySelector(".acc-btn");
        const panel = document.querySelector(".acc-panel");
        const chev = document.querySelector(".acc-btn .chev");
        if (!btn || !panel) return;

        btn.addEventListener("click", () => {
            const open = panel.style.maxHeight && panel.style.maxHeight !== "0px";
            if (open) {
                panel.style.maxHeight = "0px";
                chev.style.transform = "rotate(0deg)";
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                chev.style.transform = "rotate(180deg)";
            }
        });
    })();

    // ===== Lightbox for images =====
    (function () {
        const overlay = document.getElementById("lightbox");
        const img = document.getElementById("lightboxImg");
        const close = document.getElementById("lightboxClose");
        const items = document.querySelectorAll(".lightboxable");

        function open(src, alt) {
            img.src = src;
            img.alt = alt || "Expanded image";
            overlay.style.display = "flex";
        }
        function shut() {
            overlay.style.display = "none";
            img.src = "";
        }

        items.forEach(i => i.addEventListener("click", () => open(i.src, i.alt)));
        close.addEventListener("click", shut);
        overlay.addEventListener("click", (e) => { if (e.target === overlay) shut(); });
        window.addEventListener("keydown", (e) => { if (e.key === "Escape") shut(); });
    })();
</script>
<script>
    // ===== Interview Insights Explorer =====
    (function () {
        const tabs = document.querySelectorAll(".tab");
        const chips = document.querySelectorAll(".chip");
        const cards = document.querySelectorAll(".insight");
        const openAffinity = document.getElementById("openAffinity");

        let activePersona = "all";
        let activeTheme = "all";

        function applyFilters() {
            cards.forEach(card => {
                const p = card.dataset.persona;
                const t = card.dataset.theme;

                const personaOK = (activePersona === "all" || p === activePersona);
                const themeOK = (activeTheme === "all" || t === activeTheme);

                const show = (personaOK && themeOK);
                card.classList.toggle("is-hidden", !show);
            });
        }

        tabs.forEach(btn => btn.addEventListener("click", () => {
            tabs.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
            activePersona = btn.dataset.persona;
            applyFilters();
        }));

        chips.forEach(btn => btn.addEventListener("click", () => {
            chips.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
            activeTheme = btn.dataset.theme;
            applyFilters();
        }));

        // Expand/collapse on each card
        cards.forEach(card => {
            const toggle = card.querySelector(".expand");
            if (!toggle) return;
            toggle.addEventListener("click", () => card.classList.toggle("open"));
        });

        // Hook into your existing lightbox to open the raw board
        if (openAffinity) {
            openAffinity.addEventListener("click", () => {
                const overlay = document.getElementById("lightbox");
                const img = document.getElementById("lightboxImg");
                if (!overlay || !img) return;

                img.src = "/static/asset/images/ux/t4sg/interview.png";
                img.alt = "Affinity mapping board (raw notes)";
                overlay.style.display = "flex";
            });
        }

        applyFilters();
    })();
</script>

{% endblock %}