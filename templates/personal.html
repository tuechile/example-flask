{% extends "layout.html" %}

{% block title %}| Personal{% endblock %}

{% block extra_css %}
<link href="/static/css/body.css" rel="stylesheet">
<style>
  /* ========= FILTER BAR (multi-select, no reflow) ========= */
  .filter-pill{
  /* kill default button look */
  appearance: none;
  -webkit-appearance: none;

  background: transparent !important;
  border: none !important;

  /* keep your typography + spacing */
  font-family: "Crimson Text", serif;
  font-weight: 600;
  font-size: 16px;
  color: #fff;
  cursor: pointer;
  padding: 10px 14px;

  /* optional: remove your old drop shadow if you want it flat */
  box-shadow: none !important;
}

  .filters {
    max-width: 1100px;
    margin: 0 auto 48px;
    padding: 0 12px;
  }

  .filters__row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-bottom: 10px;
  }

  .filter-pill {
    font-family: "Crimson Text", sans-serif;
    font-weight: 600;
    font-size: 16px;
    color: #fff;
    cursor: pointer;

    padding: 10px 14px;

    box-shadow: 0 10px 30px rgba(0,0,0,.25);

    transition: background .2s ease, border-color .2s ease, transform .06s ease;
  }

  .filter-pill:hover,
  .filter-pill:focus-visible {
    filter: blur(1px);
    outline: none;
  }

  .filter-pill.is-active {
    color: var(--accent);
    box-shadow:
      0 10px 30px rgba(0,0,0,.25),
      0 10px 30px 1px rgba(28, 165, 145, 0.14);
  }

  /* ========= GRID (same as yours) ========= */
  .card-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 14px;
  }

  @media (max-width: 900px) {
    .card-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
  }

  @media (max-width: 600px) {
    .card-grid { grid-template-columns: 1fr; }
    .filter-pill { font-size: 15px; padding: 10px 12px; }
  }

  .card {
    position: relative;
    display: block;
    text-decoration: none;
    color: #fff;
    padding: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,.25);
  }

  .card:hover, .card:focus-visible {
    filter: blur(1px);
    outline: none;
  }

  .card__title {
    font-family: 'BHN Cinema', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    font-size: clamp(14px, 1.1vw, 16px);
    margin-bottom: 8px;
  }

  .card__desc {
    font-family: 'Crimson Text', serif;
    font-size: 0.8rem;
    line-height: 1.4;
    color: #e3e3e3;
  }

  .card__meta {
    font-family: 'Crimson Text', serif;
    font-size: 13px;
    line-height: 1.35;
    color: var(--accent);
    margin-top: 6px;
  }

  /* ========= IMPORTANT: "HIDE" WITHOUT RE-FLOW =========
     This keeps each card's original grid cell.
     (No jumping / repacking to top-left.) */
  .card.is-hidden {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
  }

</style>
{% endblock %}

{% block content %}
<h1 style="text-align: center; margin: 40px; font-family: 'BHN Cinema'; color: white; font-size: 4vw">
  Personal Work
</h1>

<section class="filters" aria-label="Personal work filters">
  <!-- Multi-select filter pills -->
  <div class="filters__row" role="group" aria-label="Category filter">
    <!-- "All" resets selections -->
    <button class="filter-pill is-active" type="button" data-filter="all" aria-pressed="true">All</button>
    <button class="filter-pill" type="button" data-filter="art" aria-pressed="false">Art</button>
    <button class="filter-pill" type="button" data-filter="interactivity" aria-pressed="false">Interactivity</button>
    <button class="filter-pill" type="button" data-filter="essays" aria-pressed="false">Essays</button>
  </div>
<div style ="padding:2vh"> </div>

  <div class="card-grid" id="work-grid">

    <!-- ART -->
    <a class="card" href="street" data-category="art">
      <div class="thumbnail-header">Street Photography</div>
      <div class="thumbnail-description">Through the lens of my Nikon D5100 since 2017</div>
      <div class="thumbnail-description" style="color:#bbb;">Ongoing</div>
    </a>

    <a class="card" href="illustration" data-category="art">
      <div class="thumbnail-header">Illustrations</div>
      <div class="thumbnail-description">My journey in the world of drawing cartoons (2018-2024)</div>
      <div class="thumbnail-description" style="color:#bbb;">Delayed after 2022</div>
    </a>

    <a class="card" href="superface" data-category="art">
      <div class="thumbnail-header">Superface</div>
      <div class="thumbnail-description">Self-edited self-portraits exploring makeup and persona</div>
      <div class="thumbnail-description" style="color:#bbb;">Delayed after 2023</div>
    </a>

    <!-- INTERACTIVITY -->
    <a class="card" href="afvs" data-category="interactivity">
      <div class="thumbnail-header">Coding and Interactivity</div>
      <div class="thumbnail-description">Self-expression through code — press a key to see the face react</div>
      <div class="thumbnail-description" style="color:#bbb;">Ongoing</div>
    </a>

    <a class="card" href="gifafvs" data-category="interactivity">
      <div class="thumbnail-header">What Brings You Here</div>
      <div class="thumbnail-description">Do you wish someone would tell you what to do?</div>
      <div class="thumbnail-description" style="color:#bbb;">Oct 2024</div>
    </a>

    <!-- ESSAYS -->
    <a class="card" href="portal" data-category="essays">
      <div class="thumbnail-header">The Portal</div>
      <div class="thumbnail-description">A collection of poems and short stories</div>
      <div class="thumbnail-description" style="color:#bbb;">Discontinued in 2021</div>
    </a>

    <a class="card" href="fysemr" data-category="essays">
      <div class="thumbnail-header">The land of rivers: An imagined tea garden</div>
      <div class="thumbnail-description">Final project for FYSEMR 65R - created with Clip Studio Paint and InDesign</div>
      <div class="thumbnail-description" style="color:#bbb;">December 2024</div>
    </a>

    <a class="card" href="essays" data-category="essays">
      <div class="thumbnail-header">Video essays</div>
      <div class="thumbnail-description">A list of possible video essays I might create</div>
      <div class="thumbnail-description" style="color:#bbb;">May 2025</div>
    </a>

  </div>
</section>

<script>
  // Multi-select filters + NO reflow hiding (keeps original card positions)
  document.addEventListener('DOMContentLoaded', () => {
    const pills = Array.from(document.querySelectorAll('.filter-pill'));
    const grid  = document.getElementById('work-grid');
    const cards = grid ? Array.from(grid.querySelectorAll('.card')) : [];
    const countEl = document.getElementById('filter-count');

    // Selected filters (multi-select). Empty = show all.
    const selected = new Set();

    function setPillState(pill, on) {
      pill.classList.toggle('is-active', on);
      pill.setAttribute('aria-pressed', String(on));
    }

    function syncPills() {
      const allPill = pills.find(p => p.dataset.filter === 'all');

      // "All" is active iff nothing else is selected
      if (allPill) setPillState(allPill, selected.size === 0);

      pills.forEach(p => {
        const f = (p.dataset.filter || '').toLowerCase();
        if (f === 'all') return;
        setPillState(p, selected.has(f));
      });
    }

    function applyFilter() {
      let shown = 0;

      cards.forEach(card => {
        const cat = (card.dataset.category || '').toLowerCase();
        const match = (selected.size === 0) || selected.has(cat);

        card.classList.toggle('is-hidden', !match);

        if (match) {
          shown++;
          // optional: animate only when showing
          card.classList.remove('card-in');
          void card.offsetWidth;
          card.classList.add('card-in');
        } else {
          card.classList.remove('card-in');
        }
      });

      if (countEl) {
        const label = selected.size === 0 ? 'All projects' : Array.from(selected).join(', ');
        countEl.textContent = `${label} • ${shown} shown`;
      }

      // optional hash: #art,interactivity (empty clears)
      if (history.replaceState) {
        const hash = selected.size ? '#' + Array.from(selected).join(',') : '';
        history.replaceState(null, '', location.pathname + location.search + hash);
      }
    }

    function resetAll() {
      selected.clear();
      syncPills();
      applyFilter();
    }

    // Click behavior:
    // - "All" resets
    // - other pills toggle on/off (multi-select)
    pills.forEach(pill => {
      pill.addEventListener('click', () => {
        const f = (pill.dataset.filter || '').toLowerCase();
        if (!f) return;

        if (f === 'all') {
          resetAll();
          return;
        }

        if (selected.has(f)) selected.delete(f);
        else selected.add(f);

        syncPills();
        applyFilter();
      });
    });

    // Init from hash: #art,essays
    const hash = (location.hash || '').replace('#', '').toLowerCase().trim();
    if (hash) {
      hash.split(',').map(s => s.trim()).filter(Boolean).forEach(f => selected.add(f));
    }

    syncPills();
    applyFilter();
  });
</script>

{% endblock %}
